-- Custom types
create type public.app_role as enum ('admin', 'user');

-- USERS
create table public.users (
  id          uuid references auth.users not null primary key,
  username    text not null,
  email      text not null unique
);

-- USER ROLES
create table public.user_roles (
  id        bigint generated by default as identity primary key,
  user_id   uuid references public.users on delete cascade not null,
  role      app_role not null,
  unique (user_id, role)
);

-- Public Settings
create table public.public_settings (
  id          bigint generated by default as identity primary key,
  name        text not null,
  value       jsonb not null
);

insert INTO public.public_settings (name, value) VALUES ('is_set_up', 'false');